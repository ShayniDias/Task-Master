(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[342],{5044:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N});var a=t(95155),l=t(12115),r=t(81115),n=t(98915),i=t(88482),d=t(88524),o=t(67133),c=t(97168),m=t(89852),u=t(14503),x=t(47924),f=t(81497);let p=(0,t(19946).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);var h=t(5623),g=t(62525),j=t(16559),y=t(99840);function N(){var e,s,t;let[N,v]=(0,l.useState)({}),[w,b]=(0,l.useState)({}),[A,k]=(0,l.useState)(!0),[D,C]=(0,l.useState)(""),[R,E]=(0,l.useState)(null),[O,L]=(0,l.useState)(null),{toast:S}=(0,u.dj)();(0,l.useEffect)(()=>{(async()=>{try{let e=(0,r.KR)(n.OO,"messages"),s=await (0,r.Jt)(e);if(s.exists()){let e=s.val();v(e),b(e)}}catch(e){console.error("Error fetching messages:",e),S({title:"Error",description:"Failed to load messages",variant:"destructive"})}finally{k(!1)}})()},[S]),(0,l.useEffect)(()=>{""===D.trim()?b(N):b(Object.entries(N).reduce((e,s)=>{var t,a;let[l,r]=s;return((null==(t=r.email)?void 0:t.toLowerCase().includes(D.toLowerCase()))||(null==(a=r.message)?void 0:a.toLowerCase().includes(D.toLowerCase())))&&(e[l]=r),e},{}))},[D,N]);let M=async()=>{if(R)try{let e=(0,r.KR)(n.OO,"messages/".concat(R));await (0,r.TF)(e),v(e=>{let s={...e};return delete s[R],s}),S({title:"Success",description:"Message deleted successfully"})}catch(e){console.error("Error deleting message:",e),S({title:"Error",description:"Failed to delete message",variant:"destructive"})}finally{E(null)}},z=e=>new Date(e).toLocaleString();return(0,a.jsxs)("div",{className:"animate-fade-in space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col justify-between gap-4 md:flex-row md:items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Messages"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"View and manage customer messages"})]}),(0,a.jsxs)("div",{className:"relative w-full md:w-64",children:[(0,a.jsx)(x.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(m.p,{placeholder:"Search messages...",className:"pl-8",value:D,onChange:e=>C(e.target.value)})]})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsxs)(i.ZB,{className:"flex items-center",children:[(0,a.jsx)(f.A,{className:"mr-2 h-5 w-5"}),"Message Management"]}),(0,a.jsxs)(i.BT,{children:["You have ",Object.keys(w).length," messages in total"]})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)(d.XI,{children:[(0,a.jsx)(d.A0,{children:(0,a.jsxs)(d.Hj,{children:[(0,a.jsx)(d.nd,{children:"ID"}),(0,a.jsx)(d.nd,{children:"Email"}),(0,a.jsx)(d.nd,{children:"Message Preview"}),(0,a.jsx)(d.nd,{children:"Date"}),(0,a.jsx)(d.nd,{className:"w-[100px]",children:"Actions"})]})}),(0,a.jsx)(d.BF,{children:A?(0,a.jsx)(d.Hj,{children:(0,a.jsx)(d.nA,{colSpan:5,className:"text-center",children:"Loading messages..."})}):0===Object.keys(w).length?(0,a.jsx)(d.Hj,{children:(0,a.jsx)(d.nA,{colSpan:5,className:"text-center",children:"No messages found"})}):Object.entries(w).map(e=>{let[s,t]=e;return(0,a.jsxs)(d.Hj,{children:[(0,a.jsxs)(d.nA,{className:"font-mono text-xs",children:[s.substring(0,10),"..."]}),(0,a.jsx)(d.nA,{children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p,{className:"mr-2 h-4 w-4 text-muted-foreground"}),t.email]})}),(0,a.jsx)(d.nA,{children:t.message.length>50?"".concat(t.message.substring(0,50),"..."):t.message}),(0,a.jsx)(d.nA,{children:z(t.timestamp)}),(0,a.jsx)(d.nA,{children:(0,a.jsxs)(o.rI,{children:[(0,a.jsx)(o.ty,{asChild:!0,children:(0,a.jsxs)(c.$,{variant:"ghost",size:"icon",children:[(0,a.jsx)(h.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,a.jsxs)(o.SQ,{align:"end",children:[(0,a.jsxs)(o._2,{onClick:()=>L(s),children:[(0,a.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"View Message"]}),(0,a.jsxs)(o._2,{className:"text-destructive",onClick:()=>E(s),children:[(0,a.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},s)})})]})})]}),(0,a.jsx)(j.Lt,{open:!!R,onOpenChange:()=>E(null),children:(0,a.jsxs)(j.EO,{children:[(0,a.jsxs)(j.wd,{children:[(0,a.jsx)(j.r7,{children:"Are you sure?"}),(0,a.jsx)(j.$v,{children:"This action cannot be undone. This will permanently delete the message."})]}),(0,a.jsxs)(j.ck,{children:[(0,a.jsx)(j.Zr,{children:"Cancel"}),(0,a.jsx)(j.Rx,{onClick:M,className:"bg-destructive",children:"Delete"})]})]})}),(0,a.jsx)(y.lG,{open:!!O,onOpenChange:()=>L(null),children:(0,a.jsxs)(y.Cf,{children:[(0,a.jsxs)(y.c7,{children:[(0,a.jsx)(y.L3,{children:"Message Details"}),(0,a.jsx)(y.rr,{children:O&&(null==(e=N[O])?void 0:e.email)})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsx)("div",{className:"rounded-md bg-muted p-4",children:(0,a.jsx)("p",{className:"whitespace-pre-wrap",children:O&&(null==(s=N[O])?void 0:s.message)})}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Received on: ",O&&z(null==(t=N[O])?void 0:t.timestamp)]})]})]})})]})}},16559:(e,s,t)=>{"use strict";t.d(s,{$v:()=>p,EO:()=>m,Lt:()=>d,Rx:()=>h,Zr:()=>g,ck:()=>x,r7:()=>f,wd:()=>u});var a=t(95155),l=t(12115),r=t(17649),n=t(53999),i=t(97168);let d=r.bL;r.l9;let o=r.ZL,c=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...l,ref:s})});c.displayName=r.hJ.displayName;let m=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(c,{}),(0,a.jsx)(r.UC,{ref:s,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l})]})});m.displayName=r.UC.displayName;let u=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...t})};u.displayName="AlertDialogHeader";let x=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};x.displayName="AlertDialogFooter";let f=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.hE,{ref:s,className:(0,n.cn)("text-lg font-semibold",t),...l})});f.displayName=r.hE.displayName;let p=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.VY,{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...l})});p.displayName=r.VY.displayName;let h=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.rc,{ref:s,className:(0,n.cn)((0,i.r)(),t),...l})});h.displayName=r.rc.displayName;let g=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.ZD,{ref:s,className:(0,n.cn)((0,i.r)({variant:"outline"}),"mt-2 sm:mt-0",t),...l})});g.displayName=r.ZD.displayName},17649:(e,s,t)=>{"use strict";t.d(s,{UC:()=>V,VY:()=>Y,ZD:()=>H,ZL:()=>M,bL:()=>L,hE:()=>F,hJ:()=>z,l9:()=>S,rc:()=>Z});var a=t(12115),l=t(46081),r=t(6101),n=t(15452),i=t(85185),d=t(99708),o=t(95155),c="AlertDialog",[m,u]=(0,l.A)(c,[n.Hs]),x=(0,n.Hs)(),f=e=>{let{__scopeAlertDialog:s,...t}=e,a=x(s);return(0,o.jsx)(n.bL,{...a,...t,modal:!0})};f.displayName=c;var p=a.forwardRef((e,s)=>{let{__scopeAlertDialog:t,...a}=e,l=x(t);return(0,o.jsx)(n.l9,{...l,...a,ref:s})});p.displayName="AlertDialogTrigger";var h=e=>{let{__scopeAlertDialog:s,...t}=e,a=x(s);return(0,o.jsx)(n.ZL,{...a,...t})};h.displayName="AlertDialogPortal";var g=a.forwardRef((e,s)=>{let{__scopeAlertDialog:t,...a}=e,l=x(t);return(0,o.jsx)(n.hJ,{...l,...a,ref:s})});g.displayName="AlertDialogOverlay";var j="AlertDialogContent",[y,N]=m(j),v=(0,d.Dc)("AlertDialogContent"),w=a.forwardRef((e,s)=>{let{__scopeAlertDialog:t,children:l,...d}=e,c=x(t),m=a.useRef(null),u=(0,r.s)(s,m),f=a.useRef(null);return(0,o.jsx)(n.G$,{contentName:j,titleName:b,docsSlug:"alert-dialog",children:(0,o.jsx)(y,{scope:t,cancelRef:f,children:(0,o.jsxs)(n.UC,{role:"alertdialog",...c,...d,ref:u,onOpenAutoFocus:(0,i.m)(d.onOpenAutoFocus,e=>{var s;e.preventDefault(),null==(s=f.current)||s.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,o.jsx)(v,{children:l}),(0,o.jsx)(O,{contentRef:m})]})})})});w.displayName=j;var b="AlertDialogTitle",A=a.forwardRef((e,s)=>{let{__scopeAlertDialog:t,...a}=e,l=x(t);return(0,o.jsx)(n.hE,{...l,...a,ref:s})});A.displayName=b;var k="AlertDialogDescription",D=a.forwardRef((e,s)=>{let{__scopeAlertDialog:t,...a}=e,l=x(t);return(0,o.jsx)(n.VY,{...l,...a,ref:s})});D.displayName=k;var C=a.forwardRef((e,s)=>{let{__scopeAlertDialog:t,...a}=e,l=x(t);return(0,o.jsx)(n.bm,{...l,...a,ref:s})});C.displayName="AlertDialogAction";var R="AlertDialogCancel",E=a.forwardRef((e,s)=>{let{__scopeAlertDialog:t,...a}=e,{cancelRef:l}=N(R,t),i=x(t),d=(0,r.s)(s,l);return(0,o.jsx)(n.bm,{...i,...a,ref:d})});E.displayName=R;var O=e=>{let{contentRef:s}=e,t="`".concat(j,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(j,"` by passing a `").concat(k,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(j,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return a.useEffect(()=>{var e;document.getElementById(null==(e=s.current)?void 0:e.getAttribute("aria-describedby"))||console.warn(t)},[t,s]),null},L=f,S=p,M=h,z=g,V=w,Z=C,H=E,F=A,Y=D},54416:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},62525:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},65904:(e,s,t)=>{Promise.resolve().then(t.bind(t,5044))},81497:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},99840:(e,s,t)=>{"use strict";t.d(s,{Cf:()=>m,Es:()=>x,L3:()=>f,c7:()=>u,lG:()=>d,rr:()=>p});var a=t(95155),l=t(12115),r=t(15452),n=t(54416),i=t(53999);let d=r.bL;r.l9;let o=r.ZL;r.bm;let c=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.hJ,{ref:s,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...l})});c.displayName=r.hJ.displayName;let m=l.forwardRef((e,s)=>{let{className:t,children:l,...d}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(c,{}),(0,a.jsxs)(r.UC,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...d,children:[l,(0,a.jsxs)(r.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=r.UC.displayName;let u=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};u.displayName="DialogHeader";let x=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};x.displayName="DialogFooter";let f=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.hE,{ref:s,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",t),...l})});f.displayName=r.hE.displayName;let p=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.VY,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...l})});p.displayName=r.VY.displayName}},e=>{var s=s=>e(e.s=s);e.O(0,[507,158,201,690,324,452,526,517,441,684,358],()=>s(65904)),_N_E=e.O()}]);