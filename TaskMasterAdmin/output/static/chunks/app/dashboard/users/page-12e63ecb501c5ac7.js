(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[242],{7854:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>V});var a=t(95155),s=t(12115),l=t(81115),n=t(98915),i=t(88482),d=t(88524),o=t(67133),c=t(97168),u=t(89852),f=t(14503),m=t(47924),x=t(17580);let h=(0,t(19946).A)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);var p=t(5623),y=t(62525),j=t(16559),v=t(46081),g=t(39033),N=t(52712),w=t(63655),b="Avatar",[A,k]=(0,v.A)(b),[R,E]=A(b),C=s.forwardRef((e,r)=>{let{__scopeAvatar:t,...l}=e,[n,i]=s.useState("idle");return(0,a.jsx)(R,{scope:t,imageLoadingStatus:n,onImageLoadingStatusChange:i,children:(0,a.jsx)(w.sG.span,{...l,ref:r})})});C.displayName=b;var D="AvatarImage",L=s.forwardRef((e,r)=>{let{__scopeAvatar:t,src:l,onLoadingStatusChange:n=()=>{},...i}=e,d=E(D,t),o=function(e,r){let{referrerPolicy:t,crossOrigin:a}=r,l=s.useSyncExternalStore(I,()=>!0,()=>!1),n=s.useRef(null),i=l?(n.current||(n.current=new window.Image),n.current):null,[d,o]=s.useState(()=>T(i,e));return(0,N.N)(()=>{o(T(i,e))},[i,e]),(0,N.N)(()=>{let e=e=>()=>{o(e)};if(!i)return;let r=e("loaded"),s=e("error");return i.addEventListener("load",r),i.addEventListener("error",s),t&&(i.referrerPolicy=t),"string"==typeof a&&(i.crossOrigin=a),()=>{i.removeEventListener("load",r),i.removeEventListener("error",s)}},[i,a,t]),d}(l,i),c=(0,g.c)(e=>{n(e),d.onImageLoadingStatusChange(e)});return(0,N.N)(()=>{"idle"!==o&&c(o)},[o,c]),"loaded"===o?(0,a.jsx)(w.sG.img,{...i,ref:r,src:l}):null});L.displayName=D;var O="AvatarFallback",S=s.forwardRef((e,r)=>{let{__scopeAvatar:t,delayMs:l,...n}=e,i=E(O,t),[d,o]=s.useState(void 0===l);return s.useEffect(()=>{if(void 0!==l){let e=window.setTimeout(()=>o(!0),l);return()=>window.clearTimeout(e)}},[l]),d&&"loaded"!==i.imageLoadingStatus?(0,a.jsx)(w.sG.span,{...n,ref:r}):null});function T(e,r){return e?r?(e.src!==r&&(e.src=r),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function I(){return()=>{}}S.displayName=O;var U=t(53999);let F=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(C,{ref:r,className:(0,U.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s})});F.displayName=C.displayName;let Z=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(L,{ref:r,className:(0,U.cn)("aspect-square h-full w-full",t),...s})});Z.displayName=L.displayName;let H=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(S,{ref:r,className:(0,U.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s})});H.displayName=S.displayName;var M=t(88145);function V(){let[e,r]=(0,s.useState)({}),[t,v]=(0,s.useState)({}),[g,N]=(0,s.useState)(!0),[w,b]=(0,s.useState)(""),[A,k]=(0,s.useState)(null),{toast:R}=(0,f.dj)();(0,s.useEffect)(()=>{(async()=>{try{let e=(0,l.KR)(n.OO,"users"),t=await (0,l.Jt)(e);if(t.exists()){let e=t.val();r(e),v(e)}}catch(e){console.error("Error fetching users:",e),R({title:"Error",description:"Failed to load users",variant:"destructive"})}finally{N(!1)}})()},[R]),(0,s.useEffect)(()=>{""===w.trim()?v(e):v(Object.entries(e).reduce((e,r)=>{var t,a,s;let[l,n]=r;return((null==(t=n.email)?void 0:t.toLowerCase().includes(w.toLowerCase()))||(null==(a=n.name)?void 0:a.toLowerCase().includes(w.toLowerCase()))||(null==(s=n.userType)?void 0:s.toLowerCase().includes(w.toLowerCase())))&&(e[l]=n),e},{}))},[w,e]);let E=async()=>{if(A)try{let e=(0,l.KR)(n.OO,"users/".concat(A));await (0,l.TF)(e),r(e=>{let r={...e};return delete r[A],r}),R({title:"Success",description:"User deleted successfully"})}catch(e){console.error("Error deleting user:",e),R({title:"Error",description:"Failed to delete user",variant:"destructive"})}finally{k(null)}};return(0,a.jsxs)("div",{className:"animate-fade-in space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col justify-between gap-4 md:flex-row md:items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Users"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage your users"})]}),(0,a.jsxs)("div",{className:"relative w-full md:w-64",children:[(0,a.jsx)(m.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(u.p,{placeholder:"Search users...",className:"pl-8",value:w,onChange:e=>b(e.target.value)})]})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsxs)(i.ZB,{className:"flex items-center",children:[(0,a.jsx)(x.A,{className:"mr-2 h-5 w-5"}),"User Management"]}),(0,a.jsxs)(i.BT,{children:["You have ",Object.keys(t).length," users in total"]})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)(d.XI,{children:[(0,a.jsx)(d.A0,{children:(0,a.jsxs)(d.Hj,{children:[(0,a.jsx)(d.nd,{children:"User"}),(0,a.jsx)(d.nd,{children:"Email"}),(0,a.jsx)(d.nd,{children:"Type"}),(0,a.jsx)(d.nd,{className:"w-[100px]",children:"Actions"})]})}),(0,a.jsx)(d.BF,{children:g?(0,a.jsx)(d.Hj,{children:(0,a.jsx)(d.nA,{colSpan:4,className:"text-center",children:"Loading users..."})}):0===Object.keys(t).length?(0,a.jsx)(d.Hj,{children:(0,a.jsx)(d.nA,{colSpan:4,className:"text-center",children:"No users found"})}):Object.entries(t).map(e=>{let[r,t]=e;return(0,a.jsxs)(d.Hj,{children:[(0,a.jsx)(d.nA,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(F,{children:[(0,a.jsx)(Z,{src:t.profileImage||t.profileImageUrl,alt:t.name||t.email}),(0,a.jsx)(H,{children:(0,a.jsx)(h,{className:"h-6 w-6"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:t.name||"Anonymous"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:r})]})]})}),(0,a.jsx)(d.nA,{children:t.email}),(0,a.jsx)(d.nA,{children:(0,a.jsx)(M.E,{variant:"serviceProvider"===t.userType?"default":"customer"===t.userType?"secondary":"outline",children:t.userType})}),(0,a.jsx)(d.nA,{children:(0,a.jsxs)(o.rI,{children:[(0,a.jsx)(o.ty,{asChild:!0,children:(0,a.jsxs)(c.$,{variant:"ghost",size:"icon",children:[(0,a.jsx)(p.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,a.jsx)(o.SQ,{align:"end",children:(0,a.jsxs)(o._2,{className:"text-destructive",onClick:()=>k(r),children:[(0,a.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Delete"]})})]})})]},r)})})]})})]}),(0,a.jsx)(j.Lt,{open:!!A,onOpenChange:()=>k(null),children:(0,a.jsxs)(j.EO,{children:[(0,a.jsxs)(j.wd,{children:[(0,a.jsx)(j.r7,{children:"Are you sure?"}),(0,a.jsx)(j.$v,{children:"This action cannot be undone. This will permanently delete the user and remove their data from the database."})]}),(0,a.jsxs)(j.ck,{children:[(0,a.jsx)(j.Zr,{children:"Cancel"}),(0,a.jsx)(j.Rx,{onClick:E,className:"bg-destructive",children:"Delete"})]})]})})]})}},16559:(e,r,t)=>{"use strict";t.d(r,{$v:()=>h,EO:()=>u,Lt:()=>d,Rx:()=>p,Zr:()=>y,ck:()=>m,r7:()=>x,wd:()=>f});var a=t(95155),s=t(12115),l=t(17649),n=t(53999),i=t(97168);let d=l.bL;l.l9;let o=l.ZL,c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(l.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:r})});c.displayName=l.hJ.displayName;let u=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(c,{}),(0,a.jsx)(l.UC,{ref:r,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]})});u.displayName=l.UC.displayName;let f=e=>{let{className:r,...t}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",r),...t})};f.displayName="AlertDialogHeader";let m=e=>{let{className:r,...t}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...t})};m.displayName="AlertDialogFooter";let x=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(l.hE,{ref:r,className:(0,n.cn)("text-lg font-semibold",t),...s})});x.displayName=l.hE.displayName;let h=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(l.VY,{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",t),...s})});h.displayName=l.VY.displayName;let p=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(l.rc,{ref:r,className:(0,n.cn)((0,i.r)(),t),...s})});p.displayName=l.rc.displayName;let y=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(l.ZD,{ref:r,className:(0,n.cn)((0,i.r)({variant:"outline"}),"mt-2 sm:mt-0",t),...s})});y.displayName=l.ZD.displayName},17580:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(19946).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},17649:(e,r,t)=>{"use strict";t.d(r,{UC:()=>U,VY:()=>M,ZD:()=>Z,ZL:()=>T,bL:()=>O,hE:()=>H,hJ:()=>I,l9:()=>S,rc:()=>F});var a=t(12115),s=t(46081),l=t(6101),n=t(15452),i=t(85185),d=t(99708),o=t(95155),c="AlertDialog",[u,f]=(0,s.A)(c,[n.Hs]),m=(0,n.Hs)(),x=e=>{let{__scopeAlertDialog:r,...t}=e,a=m(r);return(0,o.jsx)(n.bL,{...a,...t,modal:!0})};x.displayName=c;var h=a.forwardRef((e,r)=>{let{__scopeAlertDialog:t,...a}=e,s=m(t);return(0,o.jsx)(n.l9,{...s,...a,ref:r})});h.displayName="AlertDialogTrigger";var p=e=>{let{__scopeAlertDialog:r,...t}=e,a=m(r);return(0,o.jsx)(n.ZL,{...a,...t})};p.displayName="AlertDialogPortal";var y=a.forwardRef((e,r)=>{let{__scopeAlertDialog:t,...a}=e,s=m(t);return(0,o.jsx)(n.hJ,{...s,...a,ref:r})});y.displayName="AlertDialogOverlay";var j="AlertDialogContent",[v,g]=u(j),N=(0,d.Dc)("AlertDialogContent"),w=a.forwardRef((e,r)=>{let{__scopeAlertDialog:t,children:s,...d}=e,c=m(t),u=a.useRef(null),f=(0,l.s)(r,u),x=a.useRef(null);return(0,o.jsx)(n.G$,{contentName:j,titleName:b,docsSlug:"alert-dialog",children:(0,o.jsx)(v,{scope:t,cancelRef:x,children:(0,o.jsxs)(n.UC,{role:"alertdialog",...c,...d,ref:f,onOpenAutoFocus:(0,i.m)(d.onOpenAutoFocus,e=>{var r;e.preventDefault(),null==(r=x.current)||r.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,o.jsx)(N,{children:s}),(0,o.jsx)(L,{contentRef:u})]})})})});w.displayName=j;var b="AlertDialogTitle",A=a.forwardRef((e,r)=>{let{__scopeAlertDialog:t,...a}=e,s=m(t);return(0,o.jsx)(n.hE,{...s,...a,ref:r})});A.displayName=b;var k="AlertDialogDescription",R=a.forwardRef((e,r)=>{let{__scopeAlertDialog:t,...a}=e,s=m(t);return(0,o.jsx)(n.VY,{...s,...a,ref:r})});R.displayName=k;var E=a.forwardRef((e,r)=>{let{__scopeAlertDialog:t,...a}=e,s=m(t);return(0,o.jsx)(n.bm,{...s,...a,ref:r})});E.displayName="AlertDialogAction";var C="AlertDialogCancel",D=a.forwardRef((e,r)=>{let{__scopeAlertDialog:t,...a}=e,{cancelRef:s}=g(C,t),i=m(t),d=(0,l.s)(r,s);return(0,o.jsx)(n.bm,{...i,...a,ref:d})});D.displayName=C;var L=e=>{let{contentRef:r}=e,t="`".concat(j,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(j,"` by passing a `").concat(k,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(j,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return a.useEffect(()=>{var e;document.getElementById(null==(e=r.current)?void 0:e.getAttribute("aria-describedby"))||console.warn(t)},[t,r]),null},O=x,S=h,T=p,I=y,U=w,F=E,Z=D,H=A,M=R},62525:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(19946).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},78988:(e,r,t)=>{Promise.resolve().then(t.bind(t,7854))},88145:(e,r,t)=>{"use strict";t.d(r,{E:()=>i});var a=t(95155);t(12115);var s=t(74466),l=t(53999);let n=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:r,variant:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)(n({variant:t}),r),...s})}}},e=>{var r=r=>e(e.s=r);e.O(0,[507,158,201,690,324,452,526,517,441,684,358],()=>r(78988)),_N_E=e.O()}]);